<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Flashcards: Animals & Plants (fc_nature)</title>
  <style>
    :root{ --bg:#0b1220; --card:#101826; --fg:#e6edf3; --muted:#9aa4b2; --line:#223046; --accent:#7dd3fc; --good:#34d399; --ans:#7dd3fc; }
    html,body{height:100%; margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans JP",sans-serif; background:radial-gradient(60rem 60rem at 50% -10%, #0b1220 0%, #0b1220 40%, #070b14 100%); color:var(--fg)}
    main{min-height:100%; display:grid; place-items:start center; padding:24px 16px}
    header{width:100%; max-width:760px}
    h1{margin:0 0 8px; font-size:clamp(1.2rem, 2.8vw, 1.7rem); line-height:1.25}
    p.lead{margin:0 0 18px; color:var(--muted)}

    .card{width:100%; max-width:760px; background:var(--card); border:1px solid var(--line); border-radius:16px; padding:22px 18px; cursor:pointer; box-shadow:0 3px 12px rgba(0,0,0,.4); outline:none}
    .pair{display:grid; grid-template-columns:1fr 1fr; gap:12px; align-items:baseline}
    .en{font-size:1.7rem; font-weight:800; letter-spacing:.2px}
    .ja{font-size:1.4rem; color:var(--ans)}
    .hidden{visibility:hidden}
    .meta{margin-top:10px; color:var(--muted); font-size:.95rem}

    /* 例文ブロック */
    .ex{margin-top:14px; padding-top:10px; border-top:1px dashed var(--line); display:flex; flex-direction:column; gap:6px}
    .ex-en{font-size:1.05rem}
    .ex-ja{font-size:1.02rem; opacity:.95; color:var(--ans)}

    /* 進捗 */
    .progress{width:100%; max-width:760px; margin:12px 0 2px}
    .bar{height:8px; background:rgba(255,255,255,.06); border:1px solid var(--line); border-radius:999px; overflow:hidden}
    .fill{height:100%; width:0%; background:linear-gradient(90deg, var(--accent), var(--good));}
    .nums{display:flex; gap:10px; margin-top:6px; color:var(--muted); font-size:.95rem}

    footer{margin-top:16px; color:var(--muted); font-size:.9rem}
    kbd{padding:2px 6px; border:1px solid var(--line); border-bottom-width:2px; border-radius:6px; font-size:.9rem}
  </style>
</head>
<body>
  <main>
    <header>
      <h1>英単語フラッシュカード：動植物（Animals & Plants）</h1>
      <p class="lead">カードを <strong>タップ</strong> または <kbd>Space</kbd>/<kbd>Enter</kbd>：<strong>答え表示 → もう一度で次へ</strong>。</p>
    </header>

    <div class="card" id="quizCard" role="group" aria-label="flashcard" tabindex="0">
      <div class="pair">
        <div class="en" id="en">—</div>
        <div class="ja hidden" id="ja">—</div>
      </div>
      <div class="ex" id="examples">
        <!-- 例文3つをここに -->
      </div>
      <div class="meta" id="meta">animals / plants</div>
    </div>

    <div class="progress" aria-live="polite">
      <div class="bar"><div class="fill" id="fill"></div></div>
      <div class="nums"><span id="lap">Lap 1</span>•<span id="pos">1/1</span>•<span id="revealCount">Reveals 0</span></div>
    </div>

    <footer>
      <span>ヒント：<kbd>Space</kbd>/<kbd>Enter</kbd>で同じ操作。非表示時も訳の行はレイアウト上の高さを維持します。</span>
    </footer>
  </main>

  <script>
    // 単語データを増量（animals, plants, ecology からバランスよく）
    const DATA = [
      { en:"mammal", ja:"哺乳類", cat:"animals", examples:[
        {en:"Humans are mammals.", ja:"人間は哺乳類だ。"},
        {en:"Whales are also mammals.", ja:"クジラも哺乳類だ。"},
        {en:"Most mammals give birth to live young.", ja:"多くの哺乳類は胎生である。"}
      ]},
      { en:"amphibian", ja:"両生類", cat:"animals", examples:[
        {en:"Frogs are amphibians.", ja:"カエルは両生類だ。"},
        {en:"Salamanders are also amphibians.", ja:"サンショウウオも両生類だ。"},
        {en:"Amphibians live both in water and on land.", ja:"両生類は水中と陸上の両方で生活する。"}
      ]},
      { en:"reptile", ja:"爬虫類", cat:"animals", examples:[
        {en:"Snakes are reptiles.", ja:"ヘビは爬虫類だ。"},
        {en:"Lizards are reptiles.", ja:"トカゲは爬虫類だ。"},
        {en:"Reptiles are cold-blooded animals.", ja:"爬虫類は変温動物だ。"}
      ]},
      { en:"insect", ja:"昆虫", cat:"animals", examples:[
        {en:"Bees are insects.", ja:"ハチは昆虫だ。"},
        {en:"Butterflies are colorful insects.", ja:"チョウは色鮮やかな昆虫だ。"},
        {en:"Insects have six legs.", ja:"昆虫は6本の脚を持つ。"}
      ]},
      { en:"predator", ja:"捕食者", cat:"animals", examples:[
        {en:"The tiger is a top predator.", ja:"トラは頂点捕食者だ。"},
        {en:"Predators hunt prey.", ja:"捕食者は獲物を狩る。"},
        {en:"Sharks are ocean predators.", ja:"サメは海の捕食者だ。"}
      ]},
      { en:"leaf", ja:"葉", cat:"plants", examples:[
        {en:"This leaf is broad.", ja:"この葉は幅広い。"},
        {en:"Leaves perform photosynthesis.", ja:"葉は光合成を行う。"},
        {en:"In autumn, leaves turn red.", ja:"秋には葉が赤くなる。"}
      ]},
      { en:"root", ja:"根", cat:"plants", examples:[
        {en:"Roots absorb water.", ja:"根は水を吸収する。"},
        {en:"The tree has deep roots.", ja:"その木は深い根を持っている。"},
        {en:"Roots support the plant.", ja:"根は植物を支える。"}
      ]},
      { en:"stem", ja:"茎", cat:"plants", examples:[
        {en:"The stem is thin.", ja:"茎は細い。"},
        {en:"Stems transport water.", ja:"茎は水を運ぶ。"},
        {en:"This stem is strong.", ja:"この茎は丈夫だ。"}
      ]},
      { en:"flower", ja:"花", cat:"plants", examples:[
        {en:"This flower is beautiful.", ja:"この花は美しい。"},
        {en:"Flowers bloom in spring.", ja:"花は春に咲く。"},
        {en:"The flower has many petals.", ja:"その花は多くの花びらを持つ。"}
      ]},
      { en:"ecosystem", ja:"生態系", cat:"ecology", examples:[
        {en:"An ecosystem is complex.", ja:"生態系は複雑だ。"},
        {en:"Forests are important ecosystems.", ja:"森林は重要な生態系だ。"},
        {en:"Pollution damages ecosystems.", ja:"汚染は生態系を破壊する。"}
      ]},
      { en:"conservation", ja:"保全・保護", cat:"ecology", examples:[
        {en:"Conservation protects nature.", ja:"保全は自然を守る。"},
        {en:"Wildlife conservation is vital.", ja:"野生動物の保護は重要だ。"},
        {en:"We must work on conservation.", ja:"私たちは保全に取り組まなければならない。"}
      ]}
    ];

    let index = 0;
    let revealed = false;
    let totalReveals = 0;
    let seenCount = 0;

    const $en = document.getElementById('en');
    const $ja = document.getElementById('ja');
    const $meta = document.getElementById('meta');
    const $card = document.getElementById('quizCard');
    const $fill = document.getElementById('fill');
    const $lap = document.getElementById('lap');
    const $pos = document.getElementById('pos');
    const $revealCount = document.getElementById('revealCount');
    const $examples = document.getElementById('examples');

    function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=(Math.random()*(i+1))|0; [arr[i],arr[j]]=[arr[j],arr[i]]; } }

    function render(){
      const x = DATA[index];
      $en.textContent = x.en;
      $ja.textContent = x.ja;
      $ja.classList.toggle('hidden', !revealed);
      $meta.textContent = x.cat || '';

      $examples.innerHTML = '';
      x.examples.forEach(ex => {
        const enDiv = document.createElement('div');
        enDiv.className = 'ex-en';
        enDiv.textContent = ex.en;
        const jaDiv = document.createElement('div');
        jaDiv.className = 'ex-ja';
        jaDiv.textContent = ex.ja;
        if(!revealed) jaDiv.classList.add('hidden'); else jaDiv.classList.remove('hidden');
        $examples.appendChild(enDiv);
        $examples.appendChild(jaDiv);
      });

      updateProgressUI();
    }

    function updateProgressUI(){
      const N = DATA.length;
      const pos = (index + 1);
      const progress = Math.round((pos / N) * 100);
      $fill.style.width = progress + '%';
      const lapsCompleted = Math.floor(seenCount / N);
      $lap.textContent = `Lap ${lapsCompleted + 1}`;
      $pos.textContent = `${pos}/${N}`;
      $revealCount.textContent = `Reveals ${totalReveals}`;
    }

    function next(){
      index = (index + 1) % DATA.length;
      seenCount++;
      revealed = false;
      render();
    }

    function onCardAction(){
      if(!revealed){
        revealed = true;
        totalReveals++;
        render();
      } else {
        next();
      }
    }

    $card.addEventListener('click', onCardAction);
    document.addEventListener('keydown', (e)=>{
      if(e.code === 'Space' || e.code === 'Enter'){
        e.preventDefault();
        onCardAction();
      }
    });

    shuffle(DATA);
    index = 0; revealed = false; totalReveals = 0; seenCount = 0;
    render();
  </script>
</body>
</html>
