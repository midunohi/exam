<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Medical Cards – 大学受験英単語（ゲージ付き）</title>
  <meta name="description" content="医療・健康をテーマにした大学受験英単語フラッシュカード。答えを表示したカード数に応じてゲージが増える。" />
  <style>
    :root{ --fg:#eee; --muted:#aaa; --line:#444; --bg:#121212; --accent:#ef4444; --fill:#22c55e; }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans JP",sans-serif;color:var(--fg);background:var(--bg)}
    main{min-height:100%;display:grid;place-items:start center;padding:20px}
    header{width:100%;max-width:860px;margin-bottom:10px}
    h1{font-size:20px;margin:0 0 6px}
    p.lead{margin:0;color:var(--muted)}

    /* ゲージ */
    .gauge{width:100%;max-width:860px;display:grid;gap:6px;margin:10px 0 16px}
    .gauge-top{display:flex;align-items:baseline;justify-content:space-between}
    .gauge-label{font-size:12px;color:var(--muted)}
    .gauge-num{font-variant-numeric:tabular-nums}
    .gbar{width:100%;height:10px;border:1px solid var(--line);border-radius:999px;overflow:hidden;background:#1c1c1c}
    .gfill{height:100%;width:0%;background:var(--fill);transition:width .25s ease}

    /* カード */
    .card{width:100%;max-width:860px;border:1px solid var(--line);border-radius:16px;padding:16px;display:grid;gap:12px;background:#1e1e1e;box-shadow:0 2px 6px rgba(0,0,0,.6);cursor:pointer}
    .row{display:grid;grid-template-columns:120px 1fr 1fr;gap:10px;align-items:center}
    .label{color:var(--muted);font-size:12px}
    .en{font-size:18px}
    .ja{font-size:18px;display:none}
    .card.revealed .ja{display:block}
    .word{font-size:28px;font-weight:600}
    .pos{font-size:12px;color:var(--muted)}
    .hint{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <main>
    <header>
      <h1>Medical Cards – 大学受験英単語</h1>
      <p class="lead">タップ/クリックで 1回目: 答え表示 → 2回目: 次へ。Space/Enter=表示切替、→/←=次/前。</p>
    </header>

    <!-- 進捗ゲージ（答えを"初めて"見た枚数でカウント） -->
    <section class="gauge" aria-label="進捗ゲージ">
      <div class="gauge-top">
        <div class="gauge-label">Progress (answered)</div>
        <div class="gauge-num" id="gnum">0 / 0</div>
      </div>
      <div class="gbar"><div class="gfill" id="gfill" style="width:0%"></div></div>
    </section>

    <section class="card" id="card" aria-label="フラッシュカード">
      <div class="row">
        <div class="label">Word</div>
        <div class="en word" id="w">—</div>
        <div class="ja" id="jaW">—</div>
      </div>
      <div class="row">
        <div class="label">POS</div>
        <div class="en pos" id="pos">—</div>
        <div class="ja">&nbsp;</div>
      </div>
      <div class="row">
        <div class="label">Meaning</div>
        <div class="en" id="enMeaning">—</div>
        <div class="ja" id="jaMeaning">—</div>
      </div>
      <div class="row">
        <div class="label">Synonyms</div>
        <div class="en" id="enSyn">—</div>
        <div class="ja" id="jaSyn">—</div>
      </div>
      <div class="row">
        <div class="label">Example</div>
        <div class="en" id="enEx">—</div>
        <div class="ja" id="jaEx">—</div>
      </div>
      <div class="hint">タップ/クリック: 1回目で答え表示（ゲージ+1・初回のみ）、2回目で次へ。→ 次 / ← 前。Space/Enter でも表示切替。</div>
    </section>
  </main>

  <script>
    const data = [
      { w:"diagnosis", pos:"n.", enMeaning:"identification of a disease", jaMeaning:"診断", enSyn:"identification of disease", jaSyn:"疾患の特定", enEx:"The doctor made a quick diagnosis.", jaEx:"医師は素早く診断を下した。" },
      { w:"symptom", pos:"n.", enMeaning:"a sign of disease", jaMeaning:"症状", enSyn:"sign, indication", jaSyn:"兆候、しるし", enEx:"Fever is a common symptom of flu.", jaEx:"発熱はインフルエンザの一般的な症状だ。" },
      { w:"treatment", pos:"n.", enMeaning:"medical care given to a patient", jaMeaning:"治療", enSyn:"therapy, medical care", jaSyn:"療法、治療", enEx:"Early treatment improves recovery.", jaEx:"早期の治療は回復を促進する。" },
      { w:"therapy", pos:"n.", enMeaning:"a method of treating illness", jaMeaning:"療法", enSyn:"treatment", jaSyn:"治療", enEx:"Physical therapy helps after surgery.", jaEx:"手術後には理学療法が助けになる。" },
      { w:"surgery", pos:"n.", enMeaning:"medical operation", jaMeaning:"手術", enSyn:"operation", jaSyn:"手術", enEx:"She needs heart surgery.", jaEx:"彼女は心臓手術が必要だ。" },
      { w:"operation", pos:"n.", enMeaning:"medical procedure to treat disease", jaMeaning:"手術／作業", enSyn:"surgical procedure", jaSyn:"外科手術", enEx:"The operation lasted three hours.", jaEx:"その手術は3時間続いた。" },
      { w:"prescription", pos:"n.", enMeaning:"a doctor's written order for medicine", jaMeaning:"処方箋", enSyn:"doctor's order", jaSyn:"医師の指示・処方", enEx:"The doctor gave me a prescription.", jaEx:"医師は私に処方箋を出した。" },
      { w:"medicine", pos:"n.", enMeaning:"substance used to treat illness", jaMeaning:"薬；医学", enSyn:"drug, medication", jaSyn:"薬、医薬品", enEx:"This medicine relieves pain.", jaEx:"この薬は痛みを和らげる。" },
      { w:"vaccine", pos:"n.", enMeaning:"a substance that protects against disease", jaMeaning:"ワクチン", enSyn:"immunization", jaSyn:"免疫（ワクチン接種）", enEx:"The vaccine prevents infection.", jaEx:"ワクチンは感染を防ぐ。" },
      { w:"infection", pos:"n.", enMeaning:"invasion of the body by pathogens", jaMeaning:"感染", enSyn:"contagion", jaSyn:"伝染、感染", enEx:"Hand washing prevents infection.", jaEx:"手洗いは感染を予防する。" },
      { w:"epidemic", pos:"n.", enMeaning:"a sudden increase of disease in an area", jaMeaning:"流行病、疫病", enSyn:"outbreak", jaSyn:"流行、突発的な発生", enEx:"The epidemic spread quickly.", jaEx:"その流行病は急速に広がった。" },
      { w:"pandemic", pos:"n.", enMeaning:"a worldwide epidemic", jaMeaning:"世界的流行", enSyn:"global epidemic", jaSyn:"世界的な流行", enEx:"COVID-19 was a global pandemic.", jaEx:"COVID-19は世界的なパンデミックだった。" },
      { w:"immunity", pos:"n.", enMeaning:"the body's ability to resist disease", jaMeaning:"免疫", enSyn:"resistance", jaSyn:"抵抗力", enEx:"Vaccines build immunity.", jaEx:"ワクチンは免疫を獲得させる。" },
      { w:"immune", pos:"adj.", enMeaning:"protected against a disease", jaMeaning:"免疫のある", enSyn:"resistant", jaSyn:"耐性のある", enEx:"He is immune to the virus.", jaEx:"彼はそのウイルスに対して免疫がある。" },
      { w:"allergy", pos:"n.", enMeaning:"abnormal reaction to a substance", jaMeaning:"アレルギー", enSyn:"hypersensitivity", jaSyn:"過敏症", enEx:"She has a pollen allergy.", jaEx:"彼女は花粉アレルギーだ。" },
      { w:"obesity", pos:"n.", enMeaning:"extreme overweight", jaMeaning:"肥満", enSyn:"overweight", jaSyn:"太り過ぎ", enEx:"Obesity is a health concern.", jaEx:"肥満は健康上の懸念だ。" },
      { w:"nutrition", pos:"n.", enMeaning:"the process of getting food for health", jaMeaning:"栄養", enSyn:"nourishment", jaSyn:"滋養、栄養", enEx:"Good nutrition is essential.", jaEx:"良い栄養は不可欠だ。" },
      { w:"malnutrition", pos:"n.", enMeaning:"poor nutrition", jaMeaning:"栄養失調", enSyn:"undernourishment", jaSyn:"栄養不足", enEx:"Children suffered from malnutrition.", jaEx:"子どもたちは栄養失調で苦しんだ。" },
      { w:"mental health", pos:"n.", enMeaning:"psychological well-being", jaMeaning:"精神的健康", enSyn:"psychological well-being", jaSyn:"心理的な健康", enEx:"Exercise supports mental health.", jaEx:"運動はメンタルヘルスを支える。" },
      { w:"therapy session", pos:"n.", enMeaning:"a meeting for treatment or counseling", jaMeaning:"治療セッション", enSyn:"counseling", jaSyn:"カウンセリング", enEx:"She attends a weekly therapy session.", jaEx:"彼女は毎週の治療セッションに参加している。" }
    ];

    // 進捗（ユニークに答えを見た枚数をカウント）
    const total = data.length;
    const seen = new Set();

    let i = 0;
    let revealed = false;

    const card = document.getElementById('card');
    const w = document.getElementById('w');
    const jaW = document.getElementById('jaW');
    const pos = document.getElementById('pos');
    const enMeaning = document.getElementById('enMeaning');
    const jaMeaning = document.getElementById('jaMeaning');
    const enSyn = document.getElementById('enSyn');
    const jaSyn = document.getElementById('jaSyn');
    const enEx = document.getElementById('enEx');
    const jaEx = document.getElementById('jaEx');

    const gnum = document.getElementById('gnum');
    const gfill = document.getElementById('gfill');

    function renderGauge(){
      const done = seen.size;
      gnum.textContent = `${done} / ${total}`;
      const pct = total ? Math.round(done/total*100) : 0;
      gfill.style.width = pct + '%';
      gfill.title = pct + '%';
    }

    function render(){
      const d = data[i];
      w.textContent = d.w;
      jaW.textContent = d.jaMeaning || '—';
      pos.textContent = d.pos || '';
      enMeaning.textContent = d.enMeaning || '—';
      jaMeaning.textContent = d.jaMeaning || '—';
      enSyn.textContent = d.enSyn || '—';
      jaSyn.textContent = d.jaSyn || '—';
      enEx.textContent = d.enEx || '—';
      jaEx.textContent = d.jaEx || '—';
      card.classList.toggle('revealed', revealed);
      renderGauge();
    }

    function toggleReveal(){
      // 初めてこの問題で答えを表示したら進捗に加算
      if(!revealed && !seen.has(i)){
        seen.add(i);
      }
      revealed = !revealed;
      render();
    }

    function next(){ i=(i+1)%data.length; revealed=false; render(); }
    function prev(){ i=(i-1+data.length)%data.length; revealed=false; render(); }

    card.addEventListener('click', ()=>{ if(!revealed){ toggleReveal(); } else { next(); } });
    window.addEventListener('keydown', e=>{
      if(e.code==='Space'||e.code==='Enter'){ e.preventDefault(); toggleReveal(); }
      else if(e.code==='ArrowRight'){ e.preventDefault(); next(); }
      else if(e.code==='ArrowLeft'){ e.preventDefault(); prev(); }
    });

    render();
  </script>
</body>
</html>
